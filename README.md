# PCAP Market Data Parser in Rust

## Description
Inspired by 
https://www.tsurucapital.com/en/code-sample.html

A program in Rust that parses market data feed in pcap packets into readable quote messages.
PCAP packets may sometimes be out of order. Invoke program with -r to reorder outputs

## Run
Tested on Windows OS, Rust version 1.80.1
```bash
rustc .\parse_quote.rs;
.\parse_quote.exe [-r optional reordering] .\mdf-kospi200.20110216-0.pcap
```
## Example input file
```
ÔÃ²¡          ÿÿ     €[MÔ  þ   þ    ^%6G DÈ8
 E  ð“W  ;
À¤xé%6Gþ<Ô ÜÈTB6014KR4101F300080110014747 00000000000 00000000000 00000000000 00000000000 00000000000011601 00000000000 00000000000 00000000000 00000000000 000000000000208000000000000000000000014880000000000000000000008595998ÿ€[M%       ^%6= DÈ8
 E  óç³  ;µÅÀ¦xé%6=Ë<› ß¨¤B6034KR4201F3270500110002268100000000000000000000000000000000000000000000000000000000000000072240000000000000000000000000000000000000000000000000000000000000094700000000000000000000003650000000000000000000008595997ÿ€[MÖf       ^%6= DÈ8
 E  óç´  ;µÄÀ¦xé%6=Ë<› ß±B6034KR4201F3280401510005125600000000000000000000000000000000000000000000000000000000000000225180000000000000000000000000000000000000000000000000000000000000044100000000000000000000003910000000000000000000008595999ÿ€[MÄy       ^%6> DÈ8
 E  óá{  ;ºüÀ¦xé%6>Î<œ ß²‘B6034KR4301F3247101310000457800000000000000000000000000000000000000000000000000000000000000052610000000000000000000000000000000000000000000000000000000000000018900000000000000000000003060000000000000000000008595999ÿ€[M*„  ,  ,   ^%6> DÈ8
...
. 6  6   ^%6> DÈ8
 E („  ;•¿À¦xé%6>Î<œÝ±G7034KR4301F324550160005100000024009002997000490005100048000500000131200000065824400005638000500001074000490000236000480000208000470000354000460000012000864200051000013800052000007400053000029900054000031600055000020100246001000190009001000070036700090005000800070011ÿ[M½2      ^%6= DÈ8
 E  ó
ñ  ;‘ˆÀ¦xé%6=Ë<› ß(9B6034KR4201F3272100240002070600142000000500141000007500140000066800139000024600138000051900045150014300000390014400000620014500000780014600000740014700000750077800040008002100140050003070004000400100003000309002997ÿ[M¸<      ^%6> DÈ8
 E  ó…  ;•óÀ¦xé%6>Î<œ ß
B6034KR4301F3250500940000679900096000030800095000009400094000023100093000019900092000013400077890009700002340009800001300009900002820010000004150010100000520039700120007000800160009004590011001400170027000709002997ÿ
```

## Expected output

Format: [pkt-time] [accept-time] [isin_code] [bqty5]@[bprice5] [bqty4]@[bprice4] [bqty3]@[bprice3] [bqty2]@[bprice2] [bqty1]@[bprice1] [bqty1]@[bprice1] [aqty1]@[aprice1] [aqty2]@[aprice2] [aqty3]@[aprice3] [aqty4]@[aprice4] [aqty5]@[aprice5]

```
Parsing pcap header start.
Magic number is 0xa1b2c3d4, timestamps are in micro-seconds
Snap length is 65535
Link bit masked is 1, which is Ethernet
Parsing pcap header done.

09:00:00:006437 08:59:59:97 KR4201F32705 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000
09:00:00:026326 08:59:59:99 KR4201F32804 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000
09:00:00:031172 08:59:59:99 KR4301F32471 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000 0000000@00000
...
09:00:29:974797 09:00:29:95 KR4301F32653 0000112@00460 0000235@00465 0000198@00470 0000057@00475 0000055@00480 0000278@00485 0000144@00490 0000190@00495 0000003@00500 0000009@00505
09:00:29:975794 09:00:29:95 KR4301F32570 0000042@00223 0000049@00224 0000043@00225 0000128@00226 0000118@00227 0000082@00228 0000151@00229 0000176@00230 0000053@00231 0000005@00232
09:00:29:996029 09:00:29:97 KR4201F32721 0000519@00138 0000246@00139 0000668@00140 0000075@00141 0000005@00142 0000039@00143 0000062@00144 0000078@00145 0000074@00146 0000075@00147
09:00:29:998584 09:00:29:97 KR4301F32505 0000134@00092 0000199@00093 0000231@00094 0000094@00095 0000308@00096 0000234@00097 0000130@00098 0000282@00099 0000415@00100 0000052@00101
```
